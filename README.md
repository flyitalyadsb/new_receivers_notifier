# Fly Italy ADS-B New Receivers Notifier

A Python tool designed to send email notifications about user updates in an ADS-B network. This tool reads from a list of peers, detects changes and sends an email every day report detailing the differences.

## Prerequisites

- A running instance of `mlat-server`. This tool reads from the `clients.json` generated by the server to identify peers.
- Python environment to execute the script.
- `pytz` Python library installed for timezone support. 
    ```bash
    pip install pytz
    ```

## Command-Line Flags Configuration

To configure the tool, use the following command-line flags:

- `--from_email`: Email address from which notifications will be sent.
- `--to`: Email address to which notifications will be sent.
- `--server`: SMTP server for sending the email.
- `--port`: SMTP server's port for sending the email. Default `465`.
- `--user`: User for the SMTP server. If not specified, it defaults to the value provided in `--from_email`.
- `--password`: Password for the SMTP server.
- `--timezone`: The timezone you're operating in. Defaults to `Europe/Rome` if not specified.

You have also to create a symylink to `/data/client.json` or create a docker-volume.
## Usage

1. Set up the environment variables mentioned above.
2. Run the script:
    ```bash
    python main.py --from_email your_email@example.com --to receiver_email@example.com --server smtp.example.com --user your_username --password your_password --timezone America/New_York
    ```

The script will constantly monitor the peer list and notify about any changes.

## Docker Deployment

For convenience, this tool can also be deployed using Docker and Docker-Compose. Use the official image `ghcr.io/flyitalyadsb/new_receivers_notifier`.

Sample `docker-compose` configuration in `docker-compose.yaml`

Then, start the service with:
```bash
docker-compose up -d
```